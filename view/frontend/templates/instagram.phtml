<?php
/**
 * Mageplaza
 * NOTICE OF LICENSE
 * This source file is subject to the Mageplaza.com license that is
 * available through the world-wide-web at this URL:
 * https://www.mageplaza.com/LICENSE.txt
 * DISCLAIMER
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 * @category    Mageplaza
 * @package     Mageplaza_InstagramFeed
 * @copyright   Copyright (c) Mageplaza (https://www.mageplaza.com/)
 * @license     https://www.mageplaza.com/LICENSE.txt
 */

$block->getAllOptions();
\Zend_Debug::dump($block->getData());
$id = uniqid();
$total = $block->getData('total_number');
$layout = $block->getData('layout');
switch ($layout) {
    case \Mageplaza\InstagramFeed\Model\Config\Source\Layout::MULTIPLE:
        $number_row = $block->getData('number_row');
        break;
    case  \Mageplaza\InstagramFeed\Model\Config\Source\Layout::OPTIMIZED:
        $number_row = 3;
        break;
    default:
        $number_row = 1;
};
$number_photo = $total/$number_row;
$width = 100/ $number_photo;
?>

<div class="mpinstagramfeed-container">
    <div class="mpinstagramfeed-header">
        <h3><?php /* @escapeNotVerified */ echo $block->getData('title') ?></h3>
        <div><?php /* @escapeNotVerified */ echo $block->getData('description') ?></div>
    </div>
    <div id="mpinstagramfeed-photos-<?php echo $id?>"></div>
</div>
<script type="text/x-magento-init">
    {
        ".mpinstagramfeed-container": {
            "mageplaza/instagram": {
                "id": "<?php /* @escapeNotVerified */ echo $id ?>",
                "token": "<?php /* @escapeNotVerified */ echo $block->getAccessToken() ?>",
                "count": "<?php /* @escapeNotVerified */ echo $total ?>",
                "sort": "<?php /* @escapeNotVerified */ echo $block->getData('sort_by') ?>",
                "image_resolution": "<?php /* @escapeNotVerified */ echo $block->getData('image_resolution') ?>"
            }
        }
    }
</script>
<style type="text/css">
    .mpinstagramfeed-container .mpinstagramfeed-photo {
        width: calc(<?php echo $width . '%' ?> - 4px);
        margin: 2px;
        display: inline-block;
        position: relative;
    }
    .mpinstagramfeed-container .mpinstagramfeed-photo .fa {
        font-size: 20px;
        text-align: left;
        line-height: 18px;
        letter-spacing: normal;
        position: absolute;
        bottom: 50%;
        opacity: 0;
        background-color: rgba(0, 0, 0, 0.3);
        color: #F0F0F0;
    }
    <?php if ($block->getData('show_like_comment') == 1): ?>
    .mpinstagramfeed-photo:hover .fa {
        opacity: 1 !important;
    }
    <?php endif; ?>
    i.fa.fa-comment {
        right: 30%;
    }

    i.fa.fa-heart {
        left: 30%;
    }

</style>
