<?php
/**
 * Mageplaza
 * NOTICE OF LICENSE
 * This source file is subject to the Mageplaza.com license that is
 * available through the world-wide-web at this URL:
 * https://www.mageplaza.com/LICENSE.txt
 * DISCLAIMER
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 * @category    Mageplaza
 * @package     Mageplaza_InstagramFeed
 * @copyright   Copyright (c) Mageplaza (https://www.mageplaza.com/)
 * @license     https://www.mageplaza.com/LICENSE.txt
 */

if ($block->isEnable()) :
$options = $block->getAllOptions();
$widgetId = $block->widgetId;
$total = $options['total_number'];
$layout = $options['layout'];
$image = $options['image_resolution'];
$number_row = $block->getNumberRow();
$width = ($number_row != null) ? (100/round($total/$number_row)) . '%' : $block->getWidthImage($image) . 'px';
$popup = $options['show_popup'];

?>

<div class="mpinstagramfeed-container">
    <div class="mpinstagramfeed-header">
        <h3><?php /* @escapeNotVerified */ echo __($block->getData('title')) ?></h3>
        <div><?php /* @escapeNotVerified */ echo __($block->getData('description')) ?></div>
    </div>
    <div id="mpinstagramfeed-photos-<?php echo $widgetId?>" class="row shuffle"></div>
</div>
<style type="text/css">
    #mpinstagramfeed-photos-<?php echo $widgetId?> .mpinstagramfeed-photo {
        width: calc(<?php echo $width ?> - 4px);
    }

    @media (max-width: 767px) {
        .mpinstagramfeed-container #mpinstagramfeed-photos-<?php echo $widgetId?> .mpinstagramfeed-photo {
            width: 100%;
        }
        .mpinstagramfeed-container #mpinstagramfeed-photos-<?php echo $widgetId?> .mpinstagramfeed-photo.shuffle-item {
            width: auto;
        }

    }
    @media (min-width: 767px) and (max-width: 1024px) {
        .mpinstagramfeed-container #mpinstagramfeed-photos-<?php echo $widgetId?> .mpinstagramfeed-photo {
            width: 30%;
        }
        .mpinstagramfeed-container #mpinstagramfeed-photos-<?php echo $widgetId?> .mpinstagramfeed-photo.shuffle-item {
            width: auto;
        }
    }
</style>
<script type="text/x-magento-init">
    {
        "#mpinstagramfeed-photos-<?php echo $widgetId?>": {
            "mageplaza/instagram": {
                "id": "<?php /* @escapeNotVerified */ echo $widgetId ?>",
                "token": "<?php /* @escapeNotVerified */ echo $block->getAccessToken() ?>",
                "count": "<?php /* @escapeNotVerified */ echo $total ?>",
                "sort": "<?php /* @escapeNotVerified */ echo $options['sort_by'] ?>",
                "image_resolution": "<?php /* @escapeNotVerified */ echo $image ?>",
                "layout": "<?php /* @escapeNotVerified */ echo $layout ?>",
                "show_like_comment": "<?php /* @escapeNotVerified */ echo $options['show_like_comment'] ?>",
                "show_popup": "<?php /* @escapeNotVerified */ echo $popup ?>"
            }
        }
    }
</script>
<?php endif; ?>