<?php
/**
 * Mageplaza
 * NOTICE OF LICENSE
 * This source file is subject to the Mageplaza.com license that is
 * available through the world-wide-web at this URL:
 * https://www.mageplaza.com/LICENSE.txt
 * DISCLAIMER
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 * @category    Mageplaza
 * @package     Mageplaza_InstagramFeed
 * @copyright   Copyright (c) Mageplaza (https://www.mageplaza.com/)
 * @license     https://www.mageplaza.com/LICENSE.txt
 */

$block->getAllOptions();
$id = $block->widgetId;
$total = $block->getData('total_number');
$layout = $block->getData('layout');
$image = $block->getData('image_resolution');
$number_row = $block->getNumberRow($layout);
$width = ($number_row != null) ? (100/round($total/$number_row)) . '%' : $block->getWidthImage($image) . 'px';

?>

<div class="mpinstagramfeed-container">
    <div class="mpinstagramfeed-header">
        <h3><?php /* @escapeNotVerified */ echo $block->getData('title') ?></h3>
        <div><?php /* @escapeNotVerified */ echo $block->getData('description') ?></div>
    </div>
    <div id="mpinstagramfeed-photos-<?php echo $id?>" class="row shuffle">
        <div class="col-1@sm my-sizer-element"></div>
    </div>
</div>
<style type="text/css">
    .mpinstagramfeed-container .mpinstagramfeed-photo {
        width: calc(<?php echo $width ?> - 4px);
    }
    i.fa.fa-comment {
         left: calc(<?php echo $block->getWidthImage($image) . 'px' ?> /2);
     }

    i.fa.fa-heart {
        left: calc(<?php echo $block->getWidthImage($image) . 'px' ?> /3);
    }
</style>
<script type="text/x-magento-init">
    {
        "#mpinstagramfeed-photos-<?php echo $id?>": {
            "mageplaza/instagram": {
                "id": "<?php /* @escapeNotVerified */ echo $id ?>",
                "token": "<?php /* @escapeNotVerified */ echo $block->getAccessToken() ?>",
                "count": "<?php /* @escapeNotVerified */ echo $total ?>",
                "sort": "<?php /* @escapeNotVerified */ echo $block->getData('sort_by') ?>",
                "image_resolution": "<?php /* @escapeNotVerified */ echo $image ?>",
                "layout": "<?php /* @escapeNotVerified */ echo $layout ?>",
                "show_like_comment": "<?php /* @escapeNotVerified */ echo $block->getData('show_like_comment') ?>"
            }
        }
    }
</script>